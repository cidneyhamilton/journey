<div id="responses">
<% if @count == 0 %>
<p>No responses found.</p>
<% else %>
    <% header_fields = @questionnaire.special_field_associations.select { |sfa| sfa.purpose != 'name' }%>
    <table id="responsetable" style="width: 100%;">
        <tr>
            <th style="width: 20em" id="responsefromheader">Response from</th>
            <th>Submit Date</th>
            <% header_fields.each do |header| %>
                <th><%= header.question.caption %></th>
            <% end %>
            <th>ID</th>
            <th></th>
        </tr>
        <% @responses.each do |response| %>
            <tr class="<%=cycle "even", "odd" %>" style="height: 0">
                <td><%=link_to ellipsize(response.title,35), questionnaire_response_path(@questionnaire, response), :class => "viewresponse" %></td>
                <td>
                  <% if response.submitted -%>
                    <%=response.submitted_at%>
                  <% else -%>
                    <b>Partial</b>
                      <% end -%>
                    </td>
                    <% header_fields.each do |header| %>
                      <% answer = response.special_answer(header.purpose) -%>
                      <td>
                        <% if answer -%>
                          <%= response.special_answer(header.purpose).value %>
                        <% end -%>
                      </td>
                    <% end %>
                <td><%= response.id %></td>
            </tr>
        <% end %>
				<% (Response.per_page - @responses.length).times do %>
            <tr>
                <td>&nbsp;</td>
            </tr>
        <% end%>
    </table>
    <%= will_paginate @responses %>
<% end %>
  </div>